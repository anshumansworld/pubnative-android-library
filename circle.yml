machine:
  timezone: Europe/Berlin
  environment:
      GRADLE_OPTS: '-Dorg.gradle.jvmargs="-Xmx2048m -XX:MaxPermSize=1024m -Xms512m -XX:+HeapDumpOnOutOfMemoryError"'
  java:
      version: oraclejdk8

test:
  pre:
    - ./gradlew projectInfo
  override:
    - ./gradlew clean test
  post:
    #   Publish to Fabric if PR
    - if [ ! -z $CI_PULL_REQUEST ] ; then ./gradlew assembleDebug crashlyticsUploadDistributionDebug ; fi
    #   Publish to Coveralls
    #- ./gradlew cobertura coveralls



deployment:
  staging:
    branch: development
    commands:
      # Publish to Fabric
      - ./gradlew assembleDebug crashlyticsUploadDistributionDebug
      # Create JAR with this version
      - ./gradlew createJar
  production:
    branch: master
    commands:
      # Publish to FABRIC
      - ./gradlew assembleDebug crashlyticsUploadDistributionDebug
      # Create JAR with this version
      - ./gradlew createJar
      # Publish to BINTRAY
      - ./gradlew bintrayUpload
